<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE sqlMap   
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"   
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.cy.zygl.dao.BusQyxlwhMapper">
	<select id="selectQyXlwhPage" parameterClass="java.util.Map"
		resultClass="com.cy.zygl.domain.QyXlwhDomain">
		SELECT A.SS_JGBM AS ssJgbm,
				(select jc from qy_zzjg where jgbm=A.SS_JGBM) sjMc,
		       A.SFD_XZQH_DM AS sfdXzqhDm,
		       (SELECT XZQH_JC FROM DM_XZQH DM WHERE DM.XZQH_DM = A.SFD_XZQH_DM) sfdMc,
		       A.MDD_XZQH_DM AS mddXzqhDm,
		         (SELECT XZQH_JC FROM DM_XZQH DM WHERE DM.XZQH_DM = A.MDD_XZQH_DM) mddMc,
		       A.LCS AS lcs,
		       A.DDTS AS ddts,
		       A.YXBZ AS yxbz,
		       A.CJR_CZY_DJXH AS cjrCzyDjxh,
		       A.CJRQ AS cjrq,
		       A.XGR_CZY_DJXH AS xgrCzyDjxh,
		       A.XGRQ AS xgrq,
		       (SELECT RY.MC from QY_RYDJ RY WHERE RY.CZY_DJXH=A.CJR_CZY_DJXH) cjrMc,
		       (SELECT RY.MC from QY_RYDJ RY WHERE RY.CZY_DJXH=A.XGR_CZY_DJXH) xgrMc
		  FROM QY_XLWH A 
		  WHERE A.YXBZ='Y' 
				and A.SS_JGBM=#jgbm#
		  $orderStr$
    </select>
    
    <select id="selectQyXlwhAll" parameterClass="java.util.Map"
		resultClass="com.cy.zygl.domain.QyXlwhDomain">
		SELECT A.SS_JGBM AS ssJgbm,
		       A.SFD_XZQH_DM AS sfdXzqhDm,
		       A.MDD_XZQH_DM AS mddXzqhDm,
		       A.LCS AS lcs,
		       A.DDTS AS ddts,
		       A.YXBZ AS yxbz,
		       A.CJR_CZY_DJXH AS cjrCzyDjxh,
		       A.CJRQ AS cjrq,
		       A.XGR_CZY_DJXH AS xgrCzyDjxh,
		       A.XGRQ AS xgrq,
		       (SELECT RY.MC from QY_RYDJ RY WHERE RY.CZY_DJXH=A.CJR_CZY_DJXH) cjrMc,
		       (SELECT RY.MC from QY_RYDJ RY WHERE RY.CZY_DJXH=A.XGR_CZY_DJXH) xgrMc
		  FROM QY_XLWH A 
		  WHERE A.YXBZ='Y' 
			and A.SS_JGBM=#jgbm#
		  ORDER by A.SS_JGBM ASC,A.SFD_XZQH_DM ASC,A.MDD_XZQH_DM ASC
    </select>

	<select id="getQyXlwhRowCount" parameterClass="java.util.Map"
		resultClass="java.lang.Integer">
		SELECT count(A.SS_JGBM) 
		  FROM QY_XLWH A 
		  WHERE A.YXBZ='Y' 
			and A.SS_JGBM=#jgbm#
    </select>
    
    <select id="getXlWhSjMcByJgbm" parameterClass="java.util.Map" resultClass="com.cy.zygl.domain.QyXlwhDomain">
    	select jc as sjMc from qy_zzjg where jgbm=#jgbm#
    </select>
</sqlMap>