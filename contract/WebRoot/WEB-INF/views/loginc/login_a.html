<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="Cache-Control" content="no-cache,must-revalidate"/>
    <title>传化物流-用户登陆</title>
    <link href="../js/sys/ymPrompt/skin/ch/ymPrompt.css" rel="stylesheet" /> 
    <link type="text/css" rel="stylesheet" href="../css/reg/passport.base.css"/>
    <link type="text/css" rel="stylesheet" href="../css/reg/regist.personal.css"/>
    <script type="text/javascript" src="../js/themes/regc/jquery-1.2.6.pack.js"></script>
    <script src="../js/themes/loginc/loginc.js" type="text/javascript"></script>
    <script src="../js/sys/ymPrompt/ymPrompt.js" type=text/javascript></script>
    <style >  
  *{ margin:0; padding:0;} 
  body { font:12px/19px Arial, Helvetica, sans-serif; color:#666;}  
  .loginTab { width:240px;margin:50px;}  
  .loginTab_menu { clear:both;}  
  .loginTab_menu li { width:120px;height:30px;font-weight:bold;font-size:20px; float:left; text-align:center; cursor:pointer; list-style:none; padding:5px 6px 2px 6px;; margin-right:4px; background:#F1F1F1; border:1px solid #898989; border-bottom:none;}  
  .loginTab_menu li.hover { background:#DFDFDF;}  
  .loginTab_menu li.selected { color:#FFF; background:#6D84B4;}  
  .loginTab_box { clear:both; border:0px solid #898989; width:350px;height:200px;}  
  .hide{display:none} 
  .hide_valpic{width:500px;height:50px;margin:0px;border:0px;padding:0px; border-top: 0px;} 
  .loginTab_box input.ipt{width:233px;height:25px;font-size:18px;color:#999999}
  #perDiv{width:400px;height:250px;}
 /*.btndiv{width:400px;height:30px;}*/
  .loginTab_box.loginTab_tr{width:350px;height:100px;}
  .hidden{display:none;}
  .show{display:inline;}
  
  .hidden1{visibility: hidden;}
  .show1{visibility: visible;}
  
  .btn1_mouseout {
/* color */
	color: 				hsl(0, 0%, 40%) !important;
	background-color: 	hsl(0, 0%, 65%);
	box-shadow:		 	inset rgba(255,254,255,0.6) 0 0.3em .3em, inset rgba(0,0,0,0.15) 0 -0.1em .3em, /* inner shadow */ 
						hsl(0, 0%, 60%) 0 .1em 3px, hsl(0, 0%, 45%) 0 .3em 1px, /* color border */
						
}
 /*entry*/
        #entry .mt{height:36px;background:url(../new/misc/skin/df/i/tit_regist.jpg) #f5f5f5 repeat-x 0 0px;border-bottom: 1px solid #dddddd;}
        #entry .mc{padding:40px 20px 30px 20px;border:solid #f5f5f5;border-width:0px 0px 0px 0px; margin-bottom: 10px;}
        #entry .form{float:right;width:350px;overflow:hidden;}
            /*guide*/
        #guide{float:left;width:553px;height:330px;padding:0px 0px 0px 0px;border:0px solid #0000ff;}
        #guide .content{padding:10px 0 0;}
        #guide .btn-personal{width:137px;height:35px;background:url(../new/misc/skin/df/i/bg_regist.jpg) no-repeat 0 -186px;line-height:35px;margin:20px auto;font-weight:bold;font-size:14px;margin-top:35px;}
.form {padding:0px 0px 0px 0px;border:solid #D1D1D1;border-width:1px 1px 1px 1px; margin-bottom: 10px;}
/*banner*/
.c-div-banner{min-width:1000px;width:100%;height:85px;;background-color:#f8f8f8;margin:0px;border:0px;border-right:0px solid #999999;border-bottom:2px solid #ec6110;text-align:center;}
.c-table-banner{width:1000px;height:85px;margin:0px auto;border:0px;border:0px solid #999999;text-align:center;}

</style>
</head>
<body>
    <script type="text/javascript">function login(){location.href="http://www.tf56.com"+location.search;return false}function regist(){location.href="http://www.tf56.com"+location.search;return false}(function(a){a.fn.Jdropdown=function(d,e){if(!this.length){return}if(typeof d=="function"){e=d;d={}}var c=a.extend({event:"mouseover",current:"hover",delay:0},d||{});var b=(c.event=="mouseover")?"mouseout":"mouseleave";a.each(this,function(){var h=null,g=null,f=false;a(this).bind(c.event,function(){if(f){clearTimeout(g)}else{var j=a(this);h=setTimeout(function(){j.addClass(c.current);f=true;if(e){e(j)}},c.delay)}}).bind(b,function(){if(f){var j=a(this);g=setTimeout(function(){j.removeClass(c.current);f=false},c.delay)}else{clearTimeout(h)}})})}})(jQuery);function addToFavorite(){var a="http://www.tf56.com";var b="传化公路港";if(document.all){window.external.AddFavorite(a,b)}else if(window.sidebar){window.sidebar.addPanel(b,a,"")}else{alert("对不起，您的浏览器不支持此操作!\n请您使用菜单栏或Ctrl+D收藏本站。")}}</script>
<div id="shortcut">
	<div class="w">
			<ul class="fr lh">
				<li class="fore1 ld" style="margin-right:600px;" id="loginbar"><span></span> 您好！欢迎来到传化物流！</li>
				<li class="fore5 menu" data-widget="dropdown">
					<dl>
						<dt class="ld"><a href="../front/index.html" target="_blank" >首页<b></b></a></dt>
					</dl>
				</li>
				<li class="fore4 menu" data-widget="dropdown">
					<dl>
						<dt class="ld"><a href="http://bus.tf56.com" target="_blank">路港快线<b></b></a></dt>
					</dl>
				</li>

				<li class="fore1 ld"><span id="logout"></span></li>
			</ul>
			<span class="clr"></span>
		</div>
	</div><!--shortcut end-->
	<div class="c-div-banner">
	    <table class="c-table-banner" >
		    <tr style="height:3px;"></tr>
			<tr>
				<td>
			    	<a href="#"><img src="../imgs/login/newlogin/logo.png" alt="传化物流" width="249" height="57"/></a>
				</td>
				<td style="width:600px;"></td>
				<td style="width:234px;height:51px;">
					<a href="#"><img src="../imgs/login/newlogin/login_tel.png" alt="服务热线" /></a>
				</td>
			</tr>
		</table>
	</div>
</div>
<div id="entry" class="w">
	<div style="padding-top:20px;" class="mc">
       	<div class="form">  
     		<form id="login" name="login">
		     	<div class="loginTab_box">  
			     	<div class="mt">
			     	  <h2 style="margin:8px 0px 0px 20px;font-size: 14px;">用户登录</h2>
			     	</div> 
			     	<div>
			     	  <table border=0 style="width:350px;">
		  				<tr style="height: 30px;">
		    		      <td width="40px;"></td>
		    		       <td colspan=2 style="font-size:13px; border: 1px solid #f7c4cb;color: #e10020;background: #fff5f6;" id="myerror" class="hidden1">
		    		        <img src="../imgs/login/newlogin/error_icon.png" style="margin-left: 18px;" />
		    		        <span id="msglogin"></span> <!-- 错误提示框 -->
		    		       </td>
		    		       <td width="25px;"></td>
		    		      		          		    
		    		    </tr>
		    		   </table>
		     		</div>
		          	<div id="perDiv">
		          		<table border=0 style="width:350px;">
			          		<tr style="height: 1px;">
			    		       <td colspan=2 style="font-size:13px;width:330px;"></td>
			    		       <td width="37px;"></td>   
			    		    </tr>
		          			<tr>
		          				<td style="text-align:right;width:80px;font-size:12px;color:#3f3f3f;">会员名：</td>
		          				<td style="width:233px;"><input class="ipt" type="text" id="username" name="username" onFocus="focusInputEle(this)" onBlur="blurInputEle(this)" defaultVal="请输入用户名" value="请输入用户名" style="width: 233px;font-size:14px;height: 30px;vertical-align: middle;line-height: 30px;padding-left:3px;"/></td>
		          			    <td width="37px"></td>
		          			</tr>
		          			<tr  class="loginTab_tr">
		          			   <td colspan=3 style="font-size:12px;color:#0088cc;visibility:hidden;" id="test1"><font style="margin-left:70px;">企业会员为:会员号/操作员   如(物流公司/张三)</font></td>
		          			</tr>
		          			<tr class="loginTab_tr">
		          				<td style="text-align:right;width:80px;font-size:12px;color:#3f3f3f;">密    码：</td>
		          				<td style="width:233px;"><input class="ipt" type="password" id="password" name="password" style="width: 233px;font-size:15px;height: 30px;vertical-align: middle;line-height: 30px;padding-left:3px;" onFocus="focusInputPwd(this)" onKeyDown="if(event.keyCode==13) tab()"/></td>
		          			    <td width="37px"></td> 
		          			</tr>	          	   
		          		</table>
		          	</div>
	        	</div> 
		     	<div class="btndiv" style="margin-top: 0px;">
          			<table border=0 style="width:350px;">
          				<tr id='trcode'>
                          	<td style="text-align:right;width:73px;font-size:12px;color:#3f3f3f;"><p id="pcodelabel" class="hidden">验证码：</p></td>
                          	<td colspan=2 style="width:277px;">
                          		<div id="cCode" class="hidden">
                              		<input style="width:100px;height:28px;font-size:14px;color:#999999;padding-top:4px;padding-left:3px;" id="cauthCode" name="cauthCode" value="" type="text" size=4 onKeyDown="if(event.keyCode==13)event.keyCode=9" onFocus="focusInputCauth(this)" onBlur="blurInputEle(this)" defaultVal="请输入验证码" />  
                              		&nbsp;&nbsp;<img src="authImage" id="pic" onclick="return chk_image();"  alt="验证码" border="0" title="点击更换图片" style="cursor:pointer;margin-top: 4px;vertical-align: middle;line-height: 30px;" height="30px;"/>
                          		 	<a style="text-decoration:none;cursor:pointer;color:#3f3f3f;" onclick="return chk_image();">&nbsp;&nbsp;&nbsp;换一张?</a>
                          		 </div>
                          	</td>
                          	
                      	</tr>        	
          			</table>
				</div>
				<div class="btndiv">
					<table border=0 style="width:350px;height:50px;">
						<tr style="width:350px;height:50px;padding:0px;border:0px;margin:0px;">
						    <td width="75px" style="margin:0px;padding:0px;border:0px solid red;"></td>
							<td style="width:235px;margin:0px;padding:0px;border:0px solid red;text-align:left;">
								<!--<img src="../imgs/login/newlogin/bt_login.jpg" class="btn1_mouseout" id="loginsubmit" style="width:233px;height:41px;margin:0px;padding:0px;border:0px;cursor:pointer"></img>
								--><input type="button" style="width:233px;height:41px;margin:0px;padding:0px;border:0px;cursor:pointer;background-image: url('../imgs/login/newlogin/bt_login.jpg')" class="btn1_mouseout" id="loginsubmit"/>
							</td>
							<td width="39px;"></td>
						</tr>
						<tr>		   
						   <td colspan="3" style="text-align:center">
						    <img src="../imgs/login/newlogin/line_login.jpg"/>
						   </td>
						</tr>
						<tr style="width:350px;height:50px;">
						   <td width="75px"></td>
						   <!-- <td style="width: 235px;vertical-align:top"><a href="../regcs/reg" style="font-size: 12px;color: blue;">免费注册</a></td> -->
						   <td width="39px">
						   		<a style="display:none" id="downloadBrowser" url="../soft/Firefox-latest.exe" href="javascript:void(0)">点击</a>
						   </td>						
						</tr>
		          	</table>
				</div>
			</form> 
        </div>
        <div id="guide">
            <div class="app">
                <img src="../imgs/login/newlogin/banner_login.jpg" alt="路港快线" style="width: 553px; height: 347px" />
            </div>
        </div>
        <span class="clr"></span>
    </div>
</div>
 
    <script type="text/javascript"> 
    function tab()   
 {   
   // alert("xxx");   
   $('#loginsubmit').click();
       
 }  
    
    javascript:window.history.forward(1);
    var iloginclick;
    $(function() {
    //获取cookie的用户名并放入用户名中
    var myusername=getCookie("username");
   if(myusername==null){
	    $("#username").val("");
   }else{
	    $("#username").val(unescape(myusername));
   }
   
   			$('#downloadBrowser').click(function(){
    			window.location.href=$(this).attr('url');
    		});
    		
	    	 var bro=$.browser;
	    	 var binfo="";
    		 if(bro.msie) {
    			 binfo="Microsoft Internet Explorer "+bro.version;
    			 //alert(bro.version=='8.0');
    			 if(bro.version=='6.0'){
    			 	ymPrompt.alert('您目前使用的浏览器版本过低，<br/>请立即更新您的浏览器',null,null,'提示信息',function(){
    			 		$('#downloadBrowser').trigger('click');
   		      		});
    			 	
    			 }
    		 }
   
   // alert("xx->"+myusername);
    
        $("#shortcut .menu").Jdropdown({delay: 50});
    var iClick=0;
    $("#myerror").addClass('hidden1');
	$('#pcodelabel').addClass('hidden');
	$('#cCode').addClass('hidden');
	$('#loginsubmit').bind('click',function(){
		
 	 var bro=$.browser;
   	 var binfo="";
	 if(bro.msie) {
		 binfo="Microsoft Internet Explorer "+bro.version;
		 	 //alert(bro.version=='8.0');
			 if(bro.version=='6.0'){
			 	ymPrompt.alert('您目前使用的浏览器版本过低，<br/>请立即更新您的浏览器',null,null,'提示信息',function(){
			 		$('#downloadBrowser').trigger('click');
	      		});
	      		return false;
			 }
    	}
	
		if((iClick++)>=2){
			$('#pcodelabel').removeClass('hidden').addClass('show');
			$('#cCode').removeClass('hidden').addClass('show');
		}
		var username=trim($("#username").val());	
		var password=$("#password").val();
		var cauthCode=$("#cauthCode").val();
		//以下代码顺序不能动
		if(username=="请输入用户名"||username==""||username.length<=0){
		
		      $("#myerror").removeClass('hidden1').addClass('show1');
		      $('#msglogin').text('会员号不能为空!');
		     return false;}
		if((username.split("\/").length-1)>=2){
              $("#myerror").removeClass('hidden1').addClass('show1');
              $('#msglogin').text('用户输入格式不正确，应为\"会员号/操作员\"!');
              return false;}
		if(username.indexOf('\/')!=-1){
			 var v=username.split("\/");
             if(trim(v[0])==null||trim(v[0])==''||trim(v[1])==null||trim(v[1])==''){
                $("#myerror").removeClass('hidden1').addClass('show1');
             	$('#msglogin').text('用户输入格式不正确，应为\"会员号/操作员\"!');
             	return false;}}
		if(password==""||password.length<=0){
		      $("#myerror").removeClass('hidden1').addClass('show1');
		      $('#msglogin').text('密码不能为空!');return false;}
		if(iClick>3&&(cauthCode=="请输入验证码"||cauthCode==""||cauthCode.length<=0)){ 
		      $("#myerror").removeClass('hidden1').addClass('show1');
		      $('#msglogin').text('验证码不能为空!');return false;}
		//以上代码顺序不能动
		$('#loginsubmit').css("background-image","url(../imgs/login/newlogin/bt_login_visit.jpg)");
		iloginclick=1;
		var params = 'iClick='+iClick+'&partyname='+encodeURIComponent(encodeURIComponent(username))+'&password='+password+'&cauthCode='+cauthCode+'&random='+Math.random();
	   $.ajax({   
	      url:'login_validate.json?'+params,
	      dataType:'json',
		  contentType: "application/json",
	      type:'post',
	      error : function() {
				alert("加载错误");
				iloginclick=0;$('#loginsubmit').css("background-image","url(../imgs/login/newlogin/bt_login.jpg)");
			},
	      success:function(data){ 
	    
	       SetCookie("username",username) //保存用户名到cookie中
	       
	      	if(data.msg=='ok'){
	      		$(this).removeClass('hidden');
	      		//window.self.location = "login_main?"+data.partyname;//老web框架登录后入口
	      		window.self.location = "index_main?"+data.partyname;
	      	}else{
	      		iloginclick=0;$('#loginsubmit').css("background-image","url(../imgs/login/newlogin/bt_login.jpg)");
	      	    $("#myerror").removeClass('hidden1').addClass('show1');
	        	$('#msglogin').text(data.msg); //实现提取数据并更换div中内容，不刷新页面。
	        	var img = document.getElementById("pic"); 
				img.src = "authImage?id=" + Math.random();      
	        } 
	      }/*,
	      error:function(XMLHttpRequest, textStatus, errorThrown) {
              alert("error");
	   		}*/
	   	
	  });
	  return false;  
	}); 
	$('#loginsubmit').mouseover(function(){
		if(iloginclick!=1){
			$(this).css("background-image","url(../imgs/login/newlogin/bt_login_hover.jpg)");
		}
	});
	$('#loginsubmit').mouseout(function(){
		if(iloginclick!=1){
			$(this).css("background-image","url(../imgs/login/newlogin/bt_login.jpg)");
		}
	});
    });
function trim(str){ //删除左右两端的空格
　　return str.replace(/(^\s*)|(\s*$)/g, "");
}
function chk_image(){ 
	var img = document.getElementById("pic"); 
	img.src = "authImage?id=" + Math.random();     
}
//cookie  获取cookie的方法

function SetCookie(name,value)//两个参数，一个是cookie的名子，一个是值
{
    var Days = 300; //此 cookie 将被保存 30 天
    var exp  = new Date();    //new Date("December 31, 9998");
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    document.cookie = name + "="+  escape(value) + ";expires=" + exp.toGMTString();
}
function getCookie(name)//取cookies函数       
{
    var arr = document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));
     if(arr != null) return (arr[2]); return null;

}
function delCookie(name)//删除cookie
{
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval=getCookie(name);
    if(cval!=null) document.cookie= name + "="+cval+";expires="+exp.toGMTString();
}


</script>

    

</body>
</html>
 
 

